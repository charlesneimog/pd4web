{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Home","text":""},{"location":"#home","title":"Home","text":""},{"location":"#pd-for-the-web-beyond-vanilla","title":"Pd for the web, beyond vanilla","text":""},{"location":"#key-features","title":"Key Features","text":"<ul> <li>Extensive Externals Support: <code>pd4web</code> supports over 800 external objects, giving you unmatched flexibility.</li> <li>Rich GUI Interface: Use <code>pdlua</code> to create powerful interfaces.</li> <li>Simple Access: Performers can run compositions directly in the browser without complex Pure Data setups or additional libraries.</li> <li>Preserve Live Electronic Music: Leverage WebAudioApps to safeguard live electronic works. <code>pd4web</code> automatically downloads and organizes all the code required to run your music seamlessly.</li> </ul> <p>Questions or Help?</p> <p>Check <code>pd4web</code> on Discord </p>"},{"location":"#gallery-with-projects-using-pd4web","title":"Gallery with Projects using pd4web Scofo FollowerDidactic patchesVexFlow, Choir, and <code>pd4web</code><code>p5js</code> with <code>pd4web</code>Physical Modelling with <code>pmpd</code>cartographie <code>p5js</code> + puredata<code>p5js</code>, <code>ml5</code> and <code>pd4web</code>BiAGaiasense","text":"<p>     C\u00e2nticos de Sil\u00edcio I \u2013 first piece using OScofo AI to sync performer and computer, testing trill detection.     </p> <p>       Used to exemplify the concept of Local Maxima used on Partial Tracking.     </p> <p>         Online algorithm piece that generate the piece based in the real-time spectrum.     </p> <p><code>p5js</code> and <code>pd4web</code> used together.</p> <p>         Using Physical Modelling for Synthesis.     </p> <p>Project from Jean-Yves Gratius.</p> <p>Hand recognition with PureData. Stealing code from the Code-Train channel</p> <p><code>BiA</code>: Interactive Music Acoustics Library \u2013 free digital patches for exploring sound, timbre, and synthesis</p> <p>GaiaSenses: Real-Time Climate Art \u2013 an app that transforms user-selected geolocation and meteorological data into audiovisual compositions, linking science, creativity, and emotional engagement with the planet.</p>"},{"location":"#contributors","title":"Contributors","text":""},{"location":"#about-me","title":"About me","text":"<p>         I am Charles K. Neimog, a composer and researcher in the field of computer music. <code>pd4web</code> is a project to make possible the use of Pure Data in web browsers, improving the accessibility of electronic music.      </p>"},{"location":"devs/","title":"Adding Externals Support (Pd Externals Devs)","text":"<p>For Developers of Pd Objects</p> <p>This section is intended for those developing Pd objects and looking to add the object to <code>pd4web</code>. If this doesn't apply to you, feel free to skip this section.</p>"},{"location":"devs/#pd4web-adding-support-to-externals","title":"pd4web: Adding Support to Externals","text":"<p><code>pd4web</code> consists of a set of tools accessible via a Python module named pd4web. Internally, pd4web utilizes <code>EMSCRIPTEN</code> to compile external components into dynamic static libraries.</p> <p>To integrate a new library, you must create a <code>CMakeLists.txt</code>. It's highly recommended to use pd.cmake due to assumptions made (such as the TARGET name convention like <code>earplug~</code> becoming <code>earplug_tilde</code> and others). After creating the <code>CMakeLists.txt</code> for the library you need, you can submit a PR that modifies <code>Externals.yaml</code> within <code>Sources/pd4web/Libraries</code>. In this file, simply add a new entry similar to the provided example. This will make the library compatible with <code>pd4web</code>. </p> <p>This is an example of how to define a library in the <code>Externals.yaml</code> file:</p> <pre><code>  - Name: cyclone # name of the pd library\n    Source: GITHUB # source\n    Developer: porres # in this case, Github user name\n    Repository: pd-cyclone # in this case, Github Repo\n    Version: cyclone_0.7-0 # version (tag name of stable commit hash)\n</code></pre> <p>Below the complete fields for enviroment.</p> <p></p>   Key Name   Description <code>Name</code> With name you specify the name of the library, for example <code>else</code>, <code>cyclone</code>, <code>timbreIdLib</code>. <code>Developer</code> The username of the user where the repository is hosted. For example <code>porres</code>. <code>Repository</code> The name of the repository where it is hosted. For example <code>pd-else</code>. <code>Source</code> The download source, it must be <code>GITHUB_RELEASES</code> or <code>GITHUB_TAGS</code>. <p></p>"},{"location":"devs/#building-the-cmakeliststxt","title":"Building the CmakeLists.txt","text":"<p>The <code>CMakeLists.txt</code> file is the most important file for the compilation of the external. It defines the external's name, the source files, and the dependencies. The following is an example of a <code>CMakeLists.txt</code> file for the <code>earplug~</code> library/object.</p> <pre><code>cmake_minimum_required(VERSION 3.25)\nproject(earplug~)\nset(LIB_DIR \"${PD4WEB_EXTERNAL_DIR}/${PROJECT_NAME}\")\n\npd_add_external(earplug~ \"${LIB_DIR}/earplug.c\")\n</code></pre> <p>Note that, <code>pd_add_external</code> is a function provided by the <code>pd.cmake</code> module. The first argument is the external's name, and the second argument is the source file. </p> <p>The <code>LIB_DIR</code> variable is used to define the external's directory. This directory will be <code>${PD4WEB_EXTERNAL_DIR}</code> followed by the library external name defined in the <code>Externals.yaml</code> file.</p> <p><code>PD4WEB_EXTERNAL_DIR</code> is a variable that points to the directory where the external's source files are located. It is defined in the <code>CMakeLists.txt</code> generated by <code>pd4web</code> (you don't need to define it).</p>"},{"location":"js/","title":"JavaScript API","text":""},{"location":"js/#pd4webmodule","title":"Pd4WebModule","text":"<p>For those familiar with JavaScript</p> <p>This section is for anyone with JavaScript knowledge who wants to explore interactions with the <code>pd4web</code> project. If you\u2019re not comfortable with JavaScript, you can skip this section.</p> <p>The <code>pd4web</code> project includes a JavaScript module named <code>Pd4WebModule</code>. In the <code>index.html</code> file inside the <code>WebPatch</code> directory, <code>Pd4Web</code> is loaded as follows:</p> <pre><code>var Pd4Web = null;\nPd4WebModule().then((module) =&gt; {\n    // load method\n    Pd4Web = new module.Pd4Web();\n});\n</code></pre>"},{"location":"js/#opening-a-patch","title":"Opening a Patch","text":""},{"location":"js/#pd4webopenpatch","title":"<code>Pd4Web.openPatch</code>","text":"<p>After you have loaded <code>Pd4Web</code>, you can open a patch using the following code:</p> <p>Patches must be compiled!</p> <p>Patch files MUST be compiled; simply placing a new patch file inside a folder will not work. <code>Pd4Web</code> has its own file system which is automatically built when you compile the patch. This means that files available on our website will not necessarily be available in the patch.</p> <pre><code>Pd4Web.openPatch(\"index.pd\", {\n    canvasId: \"Pd4WebCanvas\",\n    soundToggleId: \"Pd4WebAudioSwitch\",\n    patchZoom: 2,\n    projectName: \"MyProject\",\n    channelCountIn: 1,\n    channelCountOut: 2,\n    sampleRate: 48000,\n    renderGui: true,\n    requestMidi: false,\n    fps: 0,\n});\n</code></pre> <ul> <li><code>canvasId</code> - The ID of the <code>&lt;canvas&gt;</code> element in your HTML where the patch will be drawn. This will be resized.</li> <li><code>soundToggleId</code> - The ID of the <code>&lt;span&gt;</code> element in your HTML where <code>Pd4Web</code> will put a listener for click (to initialize audio).</li> <li><code>patchZoom</code> - The zoom level of the patch.</li> <li><code>projectName</code> - The name of the project, <code>Pd4Web</code> will define it as the title of the page.</li> <li><code>channelCountIn</code> - The number of input channels.</li> <li><code>channelCountOut</code> - The number of output channels.</li> <li><code>sampleRate</code> - The sample rate of the patch.</li> <li><code>renderGui</code> - Should <code>Pd4Web</code> render the GUI?</li> <li><code>requestMidi</code> - Should <code>Pd4Web</code> request MIDI access?</li> <li><code>fps</code> - The FPS of the patch. On <code>0</code> the browser will decide this.</li> </ul>"},{"location":"js/#initializing-audio-manually","title":"Initializing Audio Manually","text":""},{"location":"js/#pd4webinit","title":"<code>Pd4Web.init</code>","text":"<p>When you open the patch but the patch does not explicitly define a <code>soundToggleId</code>, you must initialize audio manually. This must be done by click user event. For example:</p> <pre><code>document.addEventListener(\n    \"click\",\n    async () =&gt; {\n        Pd4Web.init();\n    },\n    { once: true }, // Ensures this only runs once\n);\n</code></pre> <p>Running <code>init</code> outside of click event</p> <p>The browser does not allow audio to play outside of a click event.</p>"},{"location":"js/#pd4webtoggleaudio","title":"<code>Pd4Web.toggleAudio</code>","text":"<p><code>toggleAudio</code> is similar to <code>init</code>, but it can also pause the audio processing. If not using <code>Pd4Web.init()</code>, the first <code>Pd4Web.toggleAudio</code> must be triggered inside a click event.</p> <pre><code>document.addEventListener(\n    \"click\",\n    async () =&gt; {\n        Pd4Web.toggleAudio();\n    },\n);\n</code></pre>"},{"location":"js/#send-data","title":"Send data","text":"<p>If you want to send data to a Pd patch, you can use the following functions:</p>"},{"location":"js/#pd4websendbang","title":"<code>Pd4Web.sendBang</code>","text":"<p>Send a <code>bang</code> to Pd.</p> <pre><code>Pd4Web.sendBang(\"myreceiver\")\n</code></pre> <p>The <code>bang</code> will be received by <code>[r myreceiver]</code></p>"},{"location":"js/#pd4websendfloat","title":"<code>Pd4Web.sendFloat</code>","text":"<p>Send a number to Pd.</p> <pre><code>Pd4Web.sendFloat(\"myreceiver\", 5)\n</code></pre> <p>To receive this use one object <code>[r myreceiver]</code> in Pd.</p>"},{"location":"js/#pd4websendsymbol","title":"<code>Pd4Web.sendSymbol</code>","text":"<p>Send a symbol to Pd.</p> <pre><code>Pd4Web.sendSymbol(\"myreceiver\", \"mysymbol\")\n</code></pre> <p>To receive this use one object <code>[r myreceiver]</code> in Pd.</p>"},{"location":"js/#pd4websendlist","title":"<code>Pd4Web.sendList</code>","text":"<p>Send a list to Pd.</p> <pre><code>Pd4Web.sendList(\"myreceiver\", [5, \"mysymbol\"])\n</code></pre> <p>To receive this use one object <code>[r myreceiver]</code> in Pd.</p>"},{"location":"js/#pd4websendfile","title":"<code>Pd4Web.sendFile</code>","text":"<p><code>Pd4Web</code> uses an internal file system within the AudioWorklet. This is great because it keeps everything safe and secure, but it also means that to load audio files, text files, or anything else inside Pd, you first need to send those files into the <code>Pd4Web</code> file system. To do that, you must send the file\u2019s binary data.</p> <p>For example, suppose your HTML page includes:</p> <pre><code>&lt;input id=\"someAudioInput\" type=\"file\" accept=\"audio/*\" /&gt;\n</code></pre> <p>You can then use this JavaScript code:</p> <pre><code>document.getElementById(\"someAudioInput\").addEventListener(\"change\", async (e) =&gt; {\n    const file = e.target.files[0];\n    if (!file) return;\n    const arrayBuffer = await file.arrayBuffer();\n    Pd4Web.sendFile(arrayBuffer, file.name);\n});\n</code></pre> <p>This is how you can use upload files in your PureData Patch.</p>"},{"location":"js/#receive-data","title":"Receive data","text":"<p>To receive data from Pd you can use <code>callback</code> functions. They are defined by PureData <code>selector</code> and must be defined precisely.</p>"},{"location":"js/#pd4webonbangreceived","title":"<code>Pd4Web.onBangReceived</code>","text":"<p>Registers a callback function that is triggered when a <code>bang</code> is received.</p> <pre><code>Pd4Web.onBangReceived(\"r-test\", (r) =&gt; {\n    console.log(\"Received bang from\", r);\n});\n</code></pre> <p>When the patch receives a <code>bang</code> at <code>[r-test]</code>, the callback function is called.</p>"},{"location":"js/#pd4webonfloatreceived","title":"<code>Pd4Web.onFloatReceived</code>","text":"<p>Registers a callback function that is triggered when a <code>float</code> is received.</p> <pre><code>Pd4Web.onFloatReceived(\"r-test\", (r, f) =&gt; {\n    console.log(\"Received float:\", f);\n});\n</code></pre> <p>When the patch receives a <code>float</code> at <code>[r-test]</code>, the callback function is called.</p>"},{"location":"js/#pd4webonsymbolreceived","title":"<code>Pd4Web.onSymbolReceived</code>","text":"<p>Registers a callback function that is triggered when a <code>symbol</code> is received.</p> <pre><code>Pd4Web.onSymbolReceived(\"r-test\", (r, s) =&gt; {\n    console.log(\"Received symbol:\", s);\n});\n</code></pre> <p>When the patch receives a <code>symbol</code> at <code>[r-test]</code>, the callback function is called.</p>"},{"location":"js/#pd4webonlistreceived","title":"<code>Pd4Web.onListReceived</code>","text":"<p>Registers a callback function that is triggered when a <code>list</code> is received.</p> <pre><code>Pd4Web.onListReceived(\"r-test\", (r, l) =&gt; {\n    console.log(\"Received list:\", l);\n});\n</code></pre> <p>When the patch receives a <code>list</code> at <code>[r-test]</code>, the callback function is called.</p>"},{"location":"js/#pd4webonmessagereceived","title":"<code>Pd4Web.onMessageReceived</code>","text":"<p>Registers a callback function that is triggered when a <code>message</code> is received. On Pd,</p> <pre><code>Pd4Web.onMessageReceived(\"r-test\", (r, selector, list) =&gt; {\n    console.log(\"Received message from:\", r);\n});\n</code></pre> <p>When the patch receives a <code>message</code> at <code>[r-test]</code>, the callback function is called.</p>"},{"location":"js/#typescript","title":"TypeScript","text":"<p>You can add <code>Pd4Web</code>s TypeScript definitions for its JavaScript API to your project to benefit from type-checking, auto-completion, and inline documentation. The TypeScript definitions are found here.</p> <p>Exactly how to add these types to your project so that your IDE/editor uses them depends on your project's technology stack; generally, you should be able to copy the file to your project's root directory \u2014 or <code>./src</code> \u2014 and your IDE/editor will pick up the definitions.</p>"},{"location":"libraries/","title":"Externals Libraries","text":""},{"location":"libraries/#supported-objects","title":"Supported Objects","text":"<p> List of Pd externals supported by <code>pd4web</code>. </p> Library Name Description Numbers of Objects Numbers of Abs Main Dev pd-else <code>else</code> is a library required. It make a lot of things easier. 337 242 Alexandre Porres pd-cyclone <code>cyclone</code> clone a lot of Max objects. 271 2 Alexandre Porres timbreIDLib Music Analisys and MIR in general. 110 0 Willian Brent pmpd Physical Modeling for PureData 32 0 Cyrille Henry o.scofo~ Score Follower. 1 0 Charles K. Neimog ambi~ Ambisonics object for PureData using libspatialaudio (from VLC). 1 0 Charles K. Neimog pd-soundtouch <code>[soundtouch~]</code> is a transposition object for Pd 1 0 Katja Vetter pd-partialtrack Library for Partial Tracking 1 0 Charles K. Neimog pd-fftease FFTease is a collection of objects designed to facilitate spectral sound processing in Max and Pd. 37 0 Eric Lyon and Christopher Penrose earplug~ Binaural filter based on KEMAR impulse measurement for Pd. 1 0 Dan Wilcox and Chikashi Miyama pdlua Lua bindings for Pd, updated for Lua 5.3+ 1 0 Claude Heiland-Allen, Martin Peach, Albert Gr\u00e4f and Timothy Schoen <p>     Almost 1000 objects are supported by <code>pd4web</code>, more is coming. </p> <p> Need another library? Please let us know on GitHub. </p>"},{"location":"patch/compile/","title":"Compile","text":"<p>In this section I assume that <code>pd4web</code> is already installed in your machine. If this is not the case, check the install section first than come back here.</p> <p>In this section I will explain how to organize your project to compile your patch. It's not much different from what you're probably already doing, but you need to take special care with external files.</p>"},{"location":"patch/compile/#folder-structure","title":"Folder Structure","text":"<p><code>pd4web</code> runs inside a container, which means it has no knowledge of you, your browser, the website you are using, or the files on that site. For <code>pd4web</code> to access anything, such as your files, it automatically creates a Virtual File System (VFS). </p> <p>The VFS works like a USB drive: it contains only the files you explicitly include, and nothing else from your environment. </p> <p><code>pd4web</code> generates this virtual \"pendrive\" automatically, but it makes some assumptions about where your files are located. The organization of the VFS follows this path structure:</p> <p>Warning</p> <p>Be careful with upper and lower case letters.</p> <pre><code>\u251c\u2500 PROJECT_FOLDER\n\u2514\u2500\u2500 Audios/\n    \u251c\u2500\u2500 AllMyAudioFiles.wav\n    \u2514\u2500\u2500 AllMyAudioFiles.aif\n\u2514\u2500\u2500 Libs/\n    \u251c\u2500\u2500 pdAbstraction1.pd\n    \u2514\u2500\u2500 pdAbstraction2.pd\n\u2514\u2500\u2500 Extras/\n    \u251c\u2500\u2500 extrathings.png\n    \u2514\u2500\u2500 mygesture.svg\n\u2514\u2500\u2500 MY_MAIN_PATCH.pd\n</code></pre> <ul> <li>The <code>Audios</code> folder is for all audio files.  </li> <li>The <code>Libs</code> folder stores abstractions, text files, or any other relevant resources.  </li> <li>The <code>Extras</code> folder contains any additional files or miscellaneous items.</li> </ul> <p>After compiling your patch, an <code>index.html</code> file will be created in the root of the project, along with a new folder called <code>WebPatch</code>.  </p> <p>All essential content of your patch \u2014 Audios, Libs, and Extras \u2014 is stored inside the <code>WebPatch</code> folder. Your files are packed into a single file called <code>pd4web.data</code>, which acts as a virtual \"pendrive\" containing everything your patch needs.  </p> <p>In addition, the <code>WebPatch</code> folder includes other files required to run Pd, such as <code>pd4web.js</code>, <code>pd4web.threads.js</code>, and more.</p>"},{"location":"patch/compile/#how-to-use-abstractions","title":"How to use Abstractions?","text":"<p>Abstractions files must be inside <code>Libs</code> folder and be called as <code>Libs/myabs</code>. You can also use <code>declare -lib Libs</code> them call you abstraction using <code>myabs</code>. </p>"},{"location":"patch/compile/#how-to-compile-your-patch","title":"How to compile your patch?","text":"<p>To compile your <code>patch</code> using Pd you need to use the <code>pd4web</code> object. To access it you can create a new patch, create the <code>pd4web</code> object.</p> <p> </p> <p>After creation, you need to follow this step by step.</p> <ul> <li>1) First choose your patch clicking in the green button.</li> <li> <p>2) In the yellow/orange section choose the memory size and the zoom level:</p> <ul> <li>Memory: The number for the memory depends on the size of your patch, 32 for example is able to run very small patches, with few <code>osc~</code> on it, but if you have big objects like <code>else/plaits~</code> this will be a low number, use for example 512 if you have a lot of <code>else/plaits~</code> copies. </li> <li>Zoom: If you render your patch, this will control the size of it on the Web. Normally without zoom, the patch is very small, in most my use I put 2 here.</li> </ul> </li> <li> <p>3) After configuration, compile your patch clicking in the <code>red</code> button. This will take some time, and sometimes could appear to be freeze, do not close Pd, wait until you see the message <code>[pd4web] Build completed successfully!</code>.</p> </li> <li>4) After build the patch, run the server using the <code>blue</code> button. This will open a website in the browser to you test you site before upload it on some public page (check GitHub Upload and CloudFare Upload to see how to do this).</li> </ul> <p>You can also check the Template section to understand how to use templates.</p>"},{"location":"patch/externals/","title":"Externals Objects","text":"<p>External objects need to be explicitly detected by <code>pd4web</code>. This process is not fully automatic. You must provide enough information for <code>pd4web</code> to know which libraries your objects come from\u2014especially when different libraries contain objects with the same name.</p> How detection works <p><code>pd4web</code> can detect externals in two ways:</p> <ul> <li>By using a library prefix, such as <code>else/knob</code> or <code>else/keyboard</code>.</li> <li>By declaring the libraries you use, for example: <code>declare -lib else</code> or <code>declare -lib timbreIDLib</code>.</li> </ul> <p>If you do not specify this information, external objects will fail to load, and you will likely see errors such as: <code>knob: object can't be found</code>.</p> <p><code>Pd4Web</code> does not recognize the libraries that you load on startup on PureData!</p> <p><code>Plugdata</code> has external libraries</p> <p><code>Plugdata</code> uses externals libraries like, <code>else</code>, <code>cyclone</code>, <code>pdlua</code>, <code>Gem</code> and others.</p>"},{"location":"patch/gui/","title":"GUI Objects","text":"<p> Here we list all the objects that are supported by the GUI module and how to use them inside your web patch. </p> <ul> <li> <p> Light theme <p> </p></p> </li> <li> <p> Dark theme <p> </p></p> </li> </ul> <p><code>pd4web</code> just render GUI objects</p> <p><code>pd4web</code> don't render objects boxes, object connections or messages.</p>"},{"location":"patch/gui/#supported-gui-objects","title":"Supported Gui Objects","text":"<ul> <li><code>bng</code>: Bang object;</li> <li><code>tgl</code>: Toggle object;</li> <li><code>nbx</code>: Number box object;</li> <li><code>vsl</code>: Vertical slider object;</li> <li><code>hsl</code>: Horizontal slider object;</li> <li><code>vradio</code>: Vertical radio object;</li> <li><code>hradio</code>: Horizontal radio object;</li> <li><code>vu</code>: Vertical vu object;</li> <li><code>text</code>: Comment object;</li> <li><code>floatatom</code>: Number box object;</li> <li><code>symbolatom</code>: Symbol box object;</li> <li><code>listatom</code>: List box object;</li> </ul>"},{"location":"patch/gui/#pdlua-gui-objects","title":"<code>pdlua</code> GUI objects","text":"<p>All objects created using <code>pdlua</code> are supported! :)</p> <p><code>pd4web</code> supports any GUI object implemented with pdlua. To use it, place the corresponding <code>*.pd_lua</code> file in the <code>Libs/</code> directory of your patch.</p> <p>For example, the <code>show~</code> object by Ben Wes is implemented in <code>pdlua</code>. To use it with <code>pd4web</code>, download <code>show~.pd_lua</code> from the repository and copy it into the <code>Libs/</code> folder inside your patch directory. See the show~ object here.</p> <p>Also objects from <code>pd-saf</code>, <code>pd-bhack</code>, and many others, no need to extra configurations.</p> <ul> <li> <p> <code>saf.panning</code>, <code>keyboard</code> and others objects <p> </p></p> </li> <li> <p> <code>diamond</code> using Harry Partch <p> </p></p> </li> </ul>"},{"location":"patch/install/","title":"Installation","text":"<p><code>pd4web</code> can be installed as a Pure Data object or as a Python Package. </p> <p>If you are a Pure Data user, use the Pd Patch (Graphical Interface). If you know how to do Python code (write code), them use the Python Package.</p> <p></p>"},{"location":"patch/install/#pd-patch-graphical-interface","title":"Pd Patch (Graphical Interface)","text":"<p>On Pure Data, <code>pd4web</code>provides a simple GUI. To use the <code>pd4web</code> object in Pure Data, follow these steps:</p> <ul> <li>1) Open Pure Data.</li> <li>2) Go to Tools \u2192 Find Externals.</li> <li>3) Search for <code>pd4web</code>.</li> <li>4) Click Install.</li> <li>5) A patch will open automatically. Keep it open until you see the message <code>[pd4web] Pd4Web initialized successfully</code>.</li> <li>6) After you see the message, close Pd, open it again, them create a <code>pd4web</code> object. You will see a Graphical Interface similar to the image below.</li> </ul> <p> </p> <p></p>"},{"location":"patch/install/#python-package-command-line","title":"Python Package (Command Line)","text":"<p>If you're comfortable with the command line, you can use the <code>pd4web</code> package to compile your patches.</p> <ul> <li> <p> Set up in 10 seconds</p> <p>Use pip to install the <code>pd4web</code> package:</p> <pre><code>pip install pd4web\n</code></pre> </li> <li> <p> Command Line Use</p> <p>You will get a executable script called <code>pd4web</code>.</p> <pre><code>usage: pd4web &lt;PureData Patch Path&gt;\n</code></pre> </li> </ul> <p>The options of the CLI are:</p> Flag Description Default <code>--help</code> Print usage information - <code>--pd4web-folder &lt;PATH&gt;</code> Pd4Web folder (with libraries, sources, etc.) - <code>-m, --initial-memory &lt;MB&gt;</code> Initial memory size in megabytes <code>32</code> <code>-z, --patch-zoom &lt;ZOOM&gt;</code> Set patch zoom level <code>1</code> <code>-o, --output-folder &lt;PATH&gt;</code> Output folder Same as the patch being compiled <code>-c, --clear-before-compile</code> Clear <code>WebPatch</code> and <code>Pd4Web</code> folders before compilation <code>false</code> <code>-t, --template-id &lt;ID&gt;</code> Set template ID. See templates <code>0</code> <code>-s, --server</code> Start server for the given patch or current folder - <code>--evnk &lt;LIST&gt;</code> Register extra PdLua objects for a virtual number keyboard on touch devices <code>\"nbx,floatatom\"</code> <code>--evtk &lt;LIST&gt;</code> Register extra PdLua objects for a virtual text keyboard on touch devices <code>\"listatom,symbolatom\"</code> <code>--export-es6-module</code> Export Pd4WebModule as an ES6 module for native import/export and TypeScript support <code>false</code> <code>--nogui</code> Disable GUI interface <code>false</code> <code>--debug</code> Activate debug compilation (faster compilation, slower execution, more error info) <code>false</code> <code>--devdebug</code> Activate development debug compilation <code>false</code> <code>--failfast</code> Fail on first error message <code>true</code>"},{"location":"patch/problems/compilation/","title":"Compilation","text":"Compilation problems <p>If you have problems compiling your patches the easiest way to solve them is to report the problem using the GitHub issues.</p> <p>How to report?</p> <p>Create a new issue on GitHub (requires a GitHub account).</p> <ul> <li> Object not found:<ul> <li>Solution:<ul> <li>Check if the library of that object is supported Supported libraries.</li> <li>Check how <code>pd4web</code> detects objects in Externals Objects. If the library is not supported remove the object; if the library is supported, and you did what is in Externals Objects, report the issue.</li> </ul> </li> </ul> </li> <li> Object not supported:<ul> <li>Solution: You must remove the object not supported.</li> </ul> </li> </ul> <ul> <li> <code>pd4web</code> can not process some object:<ul> <li>Solution: You must report the problem and the object. I probably never used this object.</li> </ul> </li> <li> Cmake configuration problems:<ul> <li>Solution: Try to delete the <code>Pd4Web</code>, <code>build</code> and <code>Webpatch</code>, then compile it again, on errors, report the issue.</li> </ul> </li> </ul> <ul> <li> Cmake compilation problems:<ul> <li>Solution: Report the issue, these errors should not happen!</li> </ul> </li> </ul>"},{"location":"patch/problems/flutex/","title":"Flutex","text":"<code>flutex.c</code> problems <p>How to report?</p> <p>Create a new issue on GitHub (requires a GitHub account).</p> <p>If this happens, it\u2019s probably because your patch uses an object that I don\u2019t use in my patches. To resolve the issue, you need to report it to me.</p> <p>When reporting, you must include the patch that is causing the problem, because without it, I cannot solve the issue. You can always reduce the patch to the minimal size that reproduces the problem.</p> <p>Usually, these issues are accompanied by an error related to the <code>flutex.c</code> file.</p>"},{"location":"patch/problems/memory/","title":"Memory","text":"Memory problems <p>How to report?</p> <p>Create a new issue on GitHub (requires a GitHub account).</p> <p>You need to define the size of memory of your patch, this is pretty simple. Big patches needs more memory, small patches needs less memory.</p> <p>If you run a big patch with a small memory size you will get one error like this:</p> <p>Aborted(Cannot enlarge memory arrays to size 134225920 bytes (OOM).</p> <p>If you see this, you need to increase the memory size. You can do this in the <code>pd4web</code> configuration, using the memory input on Pd patch or the <code>-m</code> flag in the command line, for example, <code>-m 512</code>.</p>"},{"location":"patch/problems/where-they-live/","title":"Errors: where I see then?","text":"Errors: where I see then? <p>Errors, like the memory, flutex and others are displayed in the browser's console. To help me debug effectively, it's essential to check the console logs for your browser.</p>"},{"location":"patch/problems/where-they-live/#google-chrome-edge-brave-opera","title":"Google Chrome, Edge, Brave, Opera","text":"<ul> <li> <ul> <li>Open the browser and press <code>Ctrl + Shift + J</code> (Windows/Linux) or <code>Cmd + Option + J</code> (macOS).</li> <li>Alternatively, go to the menu: 1)  Click on the three-dot menu in the top-right corner. 2) Navigate to More Tools &gt; Developer Tools. 3) - Select the Console tab.</li> </ul> </li> </ul>"},{"location":"patch/problems/where-they-live/#mozilla-firefox","title":"Mozilla Firefox","text":"<ul> <li><ul> <li>Open the browser and press <code>Ctrl + Shift + K</code> (Windows/Linux) or <code>Cmd + Option + K</code> (macOS).</li> <li>Alternatively, go to the menu:     Click on the hamburger menu in the top-right corner.     Navigate to Web Developer &gt; Console.</li> </ul> </li> </ul> <p>Pro Tip</p> <p>Ensure to capture any errors or warnings displayed in the console. Screenshots or copied text can help us analyze the issue faster.</p>"},{"location":"patch/templates/","title":"Complete Template List","text":"<p>Website templates are predefined websites that can be used to expand what you can do with <code>pd4web</code>. In basic terms, I do the code stuff and you do the creative stuff. You can use the templates to create your own website, and you can also create your own templates to share with the community.</p> <ul> <li> <code>1</code> - Patch + Score</li> <li> <code>2</code> - Hand detection (AI)</li> </ul> <ul> <li> <code>3</code> - Choir</li> <li> <code>4</code> - pd4web + p5js</li> </ul> <ul> <li> <code>5</code> - Tutorial patches</li> <li> <code>5</code> - Tutorial patches</li> </ul>"},{"location":"patch/templates/1-score/","title":"Template <code>1</code>: Patch + Score","text":"<p>In this template you have access to a patch that receives image files (from scores) and renders it side by side with your patch. The result will be something like this:</p> <p>Click in the image to open the example in a new tab</p> <p> </p> <p> Download Patch Template </p> <p>Compile using the template mode <code>1</code></p>"},{"location":"patch/templates/1-score/#what-should-your-patch-include","title":"What should your patch include?","text":"<p>You make your patch and the score file can be set using the object <code>[s pd4web-score]</code>. I recommend you use SVG files, but you can use any image file (.png, .jpeg).</p> <ul> <li>These files must be inside the <code>WebPatch</code> folder. For example, if the score image is called <code>score-measure1.png</code>, you will send to <code>[s pd4web-score]</code> the message <code>symbol score-measure1.png</code>.</li> </ul> <p>Don't forget the <code>symbol</code> word before the file</p>"},{"location":"patch/templates/1-score/#extra-options","title":"Extra options","text":"<p>After compile the patch, you will see that, inside the folder <code>WebPatch</code>, will have a file called <code>bula.md</code>. Inside this file, you can write some description about your piece. The file uses markdown to render, you can check the complete syntax in https://www.markdownguide.org/basic-syntax/. Below the example of main command:</p> <pre><code># Title 1\n## Title 2\n### Title 3\n\n**bold text**\n*italic text**\n\n* this one item\n* this is another item\n</code></pre>"},{"location":"patch/templates/2-hands/","title":"Template <code>2</code>: Hand detection","text":"<p>In this template you have access to the library <code>ml5.js</code>. It is based on the library <code>tensorflow.js</code> and it is used to use machine learning models inside the browser. In this case, we are going to use the <code>handpose</code> model to detect the hands in the live-video. You can read more about it on ml5 website.</p> <p>The result will be something like this:</p> <p> </p> <p> Download Patch example </p>"},{"location":"patch/templates/2-hands/#what-should-your-patch-include","title":"What should your patch include?","text":"<p>You patch must have some receivers using the <code>L-</code> and <code>R-</code> preffixes to receive the data from the hands followed by the number of the position you want, following the image below:</p> <p> </p> <p>For example, to receive the data from where is the <code>INDEX_FINGER_TIP</code> for the <code>LEFT</code> hand you must use the object <code>[r L-8]</code> in your patch.</p> <p>From these receivers, you will get two numbers, <code>x</code> and <code>y</code>, inside a list. These numbers represent the position of your hand relative to your real-time video.</p> <ul> <li>X Position: <code>0</code> is the top and <code>1</code> is the bottom.</li> <li>Y Position: <code>0</code> is the left and <code>1</code> is the right.</li> </ul> <p>In summary, <code>[x, y]</code> defines the hand's position within a coordinate system where <code>(0,0)</code> is the top-left corner and <code>(1,1)</code> is the bottom-right corner of the image.</p> <p>If you download the example patch and use the information above, you'll see that we can use the following object to detect if your finger is in the top-left corner of the image:</p> <pre><code>[expr if($f1 &lt; 0.2 &amp;&amp; $f2 &lt; 0.2, 1, 0)]\n</code></pre> <p>In this expression: - <code>$f1</code> represents the <code>x</code> coordinate (vertical position). - <code>$f2</code> represents the <code>y</code> coordinate (horizontal position).</p> <p>This expression checks if: - <code>$f1</code> is less than <code>0.2</code> (meaning your hand is near the top of the image). - <code>$f2</code> is less than <code>0.2</code> (meaning your hand is near the left side of the image).</p> <p>If both conditions are true, the output will be <code>1</code> (indicating your finger is in the top-left corner). Otherwise, the output will be <code>0</code>.</p>"},{"location":"patch/templates/3-choir/","title":"Template <code>3</code>: Choir and Phones","text":"<p>This template is just a reuse of the template used in the pieces <code>Moteto (2023)</code> and <code>Pandem\u00f4nico (2024)</code>. Pieces for choir and smartphone. Where you can do some patch with guide notes (or just the score) for the singer.</p> <p>The result will be something like this:</p> <p> </p> <p> Download Patch example </p>"},{"location":"patch/templates/3-choir/#what-should-your-patch-include","title":"What should your patch include?","text":"<p>In your patch, you have these options to set using senders, for example, <code>[s composer</code>], <code>[s title]</code>, <code>[s duration-bar]</code>, <code>[s piece-duration-bar]</code>, <code>[s poem-phrase]</code> and <code>[s pitch-syl]</code>:</p> <ul> <li><code>composer</code>: The composer name;</li> <li><code>title</code>: Title of the piece;</li> <li><code>duration-bar</code>: A number between 0 and 100 for the bar line (control the bar above the score);</li> <li><code>piece-duration-bar</code>: A number between 0 and 100 for the bar line (control the bar below the phrase);</li> <li><code>poem-phrase</code>: The complete phrase of the poem (or anything else), for example <code>minha frase</code>.</li> <li><code>pitch-syl</code>: A list with the pitchname and the syllable, for example <code>C4 fra</code>.</li> </ul> <p>In your patch, you have these options to set using receivers, for example, <code>[r naipe]</code>:</p> <ul> <li><code>naipe</code>. Receive the naipe choosen by the singer, 1 for Baixo, 2 for Tenor, 3 for Contralto and 4 for Soprano.</li> </ul> <p>Check the website of Pandemonio to see how it works.</p>"},{"location":"patch/templates/4-p5js/","title":"Template <code>4</code>: p5js and pd4web","text":"<p>Template designed for those who know how to program</p> <p>Learn how to program, I really recommend watch the Coding Train channel. It is a great channel to learn how to program in a fun way. </p> <p>This template is for the combination of <code>p5js</code> and <code>pd4web</code>. It is a simple template that uses the <code>p5js</code> library to create a canvas and pd4web to create a patch that can be used to control the canvas (or vice-versa).</p> <p> </p> <p> Download Patch Template </p> <p>There is no much to say about this template, it just use a personalized <code>index.html</code> and <code>sketch.js</code>, where you can code you <code>p5js</code> code. </p> <p>Just download and have fun. If you have any question, please, let me know. If you have some questions about <code>p5js</code> or <code>pd4web</code> you can ask me too. I will be glad to help you.</p> <p>Always check if <code>Pd4Web</code> is defined and not <code>null</code></p> <p>Always check if the <code>Pd4Web</code> object is defined before using it. This is because the <code>Pd4Web</code> object is only defined when the patch is loaded, which happens when the user click in the sound icon. <pre><code>if (Pd4Web !== null &amp;&amp; typeof Pd4Web !== \"undefined\") {\n  Pd4Web.sendList(\"myList \", [1, 2, 3]);\n}\n</code></pre></p>"},{"location":"patch/templates/5-tutorial/","title":"Template <code>5</code>: Tutorial Patches","text":"<p>Patch side by side with some text to explain the patch. The result will be something like this:</p> <p> </p> <p>To make the description again we use a markdown file. The markdown is called <code>tutorial.md</code> and is located in the <code>WebPatch</code> folder. The content of the file should be edited after compilation of the patch.</p> <p>As in the previous template, inside <code>tutorial.md</code> you can write some description about the patch. The file uses markdown to render, you can check the complete syntax in https://www.markdownguide.org/basic-syntax/. Below the example of main command:</p> <pre><code># Title 1\n## Title 2\n### Title 3\n\n**bold text**\n*italic text**\n\n* this one item\n* this is another item\n</code></pre>"},{"location":"patch/upload/cloudflare/","title":"Cloudflare","text":""},{"location":"patch/upload/cloudflare/#upload-files","title":"Upload files","text":"<ul> <li>Create a new account on Cloudflare.</li> </ul> <ul> <li>After creating your account, go to this link and search for <code>Workers and Pages</code>, click on it.</li> </ul> <ul> <li>Click on the <code>Create</code> and then, in the <code>Pages</code> section, click on the <code>Upload assets</code> button.</li> </ul> <ul> <li>Select the project name, your website will be <code>&lt;project-name&gt;.pages.dev</code>. Then click on the <code>Create Project</code> button.</li> </ul> <ul> <li>Then, inside the <code>WebPatch</code> folder, select all files and create a zip file. After that, upload the zip file to the Cloudflare. </li> </ul>"},{"location":"patch/upload/cloudflare/#publish-your-patch","title":"Publish your patch","text":"<ul> <li>Click on the <code>Deploy site</code> button and wait a few seconds (this can take 5 minutes). You will see a link to your patch. </li> </ul>"},{"location":"patch/upload/github/","title":"Github","text":""},{"location":"patch/upload/github/#upload-files","title":"Upload files","text":"<ul> <li>To upload your patch on Github, first you need a Github account. If you don't have one, you can create it here. Be sure to use a good username, your website will be <code>&lt;username&gt;.github.io</code>. </li> </ul> <ul> <li>After creating your account, you can create a new repository, you can use this link. Be sure to use a good name for your repository, your patch will be available at <code>&lt;username&gt;.github.io/&lt;repository-name&gt;</code>. After all configuration, click on the <code>Create repository</code> button.</li> </ul> <ul> <li>After creating your repository, you will see a weird page with a lot of information. You can ignore all of this and search for the link <code>uploading an existing file</code>. Click on it.</li> </ul> <ul> <li>After clicking on the link, you will see a page with a box to drag and drop your files. Upload all files inside the <code>Webpatch</code> folder. You can select all files and drag them to the box. After that, you can click on the <code>Commit changes</code> button.</li> </ul> <p>   Wait a few seconds to see your files on the repository. </p>"},{"location":"patch/upload/github/#publish-your-patch","title":"Publish your patch","text":"<ul> <li>From your repository page, click on the <code>Settings</code> tab. After that, scroll down to the <code>Pages</code> section. On the section <code>Build and deployment</code>, select the branch <code>main</code> and the folder <code>/root</code>. After that, click on the <code>Save</code> button. </li> </ul> <p>Wait a few seconds and you will see a link to your patch. You can access your patch using the link <code>&lt;username&gt;.github.io/&lt;repository-name&gt;</code>.</p> <p>Save button not working?</p> <p>Sometimes the <code>Save</code> button does not become available for the <code>/root</code>, change from <code>main</code> to <code>None</code> then <code>Save</code>, after that, change back to <code>main</code> and <code>Save</code> again.</p>"},{"location":"patch/upload/others/","title":"Others","text":"<p>There is a lot of ways to upload your patch, you can use Github, Cloudflare, or even your own server. <code>Github</code> and <code>Cloudflare</code> are the easiest ways to do it in my opinion. Here some lists of options:</p> <ul> <li>Gitlab</li> <li>Bitbucket</li> <li>Heroku</li> <li>Netlify</li> <li>Vercel</li> <li>Surge</li> </ul>"}]}